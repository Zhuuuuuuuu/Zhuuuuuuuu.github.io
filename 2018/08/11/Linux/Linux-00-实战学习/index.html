<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
   
  <meta name="keywords" content="Java Python" />
   
  <meta name="description" content="From Zero to Hero" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>
    Linux-00-实战学习 |  朱酱酱的学习博客
  </title>
  <meta name="generator" content="hexo-theme-yilia-plus">
  
  <link rel="shortcut icon" href="/favicon.ico" />
  
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>


  

  

<link rel="alternate" href="/atom.xml" title="朱酱酱的学习博客" type="application/atom+xml">
</head>

</html>

<body>
  <div id="app">
    <main class="content">
      <section class="outer">
  <article id="post-Linux/Linux-00-实战学习" class="article article-type-post" itemscope
  itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
    <header class="article-header">
       
<h1 class="article-title sea-center" style="border-left:0" itemprop="name">
  Linux-00-实战学习
</h1>
  

    </header>
    

    
    <div class="article-meta">
      <a href="/2018/08/11/Linux/Linux-00-%E5%AE%9E%E6%88%98%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time datetime="2018-08-11T03:52:53.000Z" itemprop="datePublished">2018-08-11</time>
</a>
      
      
      
<div class="word_count">
    <span class="post-time">
        <span class="post-meta-item-icon">
            <i class="ri-quill-pen-line"></i>
            <span class="post-meta-item-text"> 字数统计:</span>
            <span class="post-count">10.9k字</span>
        </span>
    </span>

    <span class="post-time">
        &nbsp; | &nbsp;
        <span class="post-meta-item-icon">
            <i class="ri-book-open-line"></i>
            <span class="post-meta-item-text"> 阅读时长≈</span>
            <span class="post-count">42分钟</span>
        </span>
    </span>
</div>

      
    </div>
    

    
    
    <div class="tocbot"></div>





    

    <div class="article-entry" itemprop="articleBody">
      


      

      
      <h1 id="Linux-00-实战学习"><a href="#Linux-00-实战学习" class="headerlink" title="Linux-00-实战学习"></a>Linux-00-实战学习</h1><p><strong>Linux 命令大全 ：</strong> <a href="https://www.runoob.com/linux/linux-command-manual.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-command-manual.html</a></p>
<a id="more"></a>



<h2 id="1-常用命令部分"><a href="#1-常用命令部分" class="headerlink" title="1. 常用命令部分"></a>1. 常用命令部分</h2><h3 id="1-1-文件查看"><a href="#1-1-文件查看" class="headerlink" title="1.1 文件查看"></a>1.1 文件查看</h3><h4 id="1-ls-命令"><a href="#1-ls-命令" class="headerlink" title="1. ls 命令"></a>1. ls 命令</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201203/143549144.png" alt="mark"></p>
<p><strong>注意</strong></p>
<ol>
<li><strong>隐藏文件</strong>是以`开头</li>
<li>第一列权限符代表的是<strong>文件的类型</strong> <ul>
<li>例如 d 代表的是文件夹</li>
<li>例如 - 代表的就是普通文件</li>
</ul>
</li>
<li><code>ls -R</code> 会递归显示<strong>当前所有文件夹下面的文件</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201203/143724964.png" alt="mark"></p>
<h4 id="2-cd-命令"><a href="#2-cd-命令" class="headerlink" title="2. cd 命令"></a>2. cd 命令</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201203/144424561.png" alt="mark"></p>
<p><strong>注意 ：</strong></p>
<ol>
<li><strong>执行<code>man cd</code>不会显示cd 的工作帮助，会显示bash 的帮助</strong><ul>
<li><strong>cd 是 bash 的内置命令</strong></li>
<li>获取内置命令帮助 需要 <code>help cd</code></li>
</ul>
</li>
</ol>
<img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201203/144616070.png" alt="mark" style="zoom:50%;" />

<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201203/144714560.png" alt="mark"></p>
<ol start="2">
<li><strong>小技巧</strong> <ol>
<li><strong><code>cd -</code> 会回到上一次所在的目录</strong></li>
<li><strong><code>cd ../</code> 返回当前目录的上一级目录</strong></li>
<li><strong><code>cd ..</code> 返回当前目录的上一级目录</strong></li>
<li><strong><code>cd ./下一级目录名</code> ：进入下一级目录</strong></li>
</ol>
</li>
</ol>
<h3 id="1-2-文件操作"><a href="#1-2-文件操作" class="headerlink" title="1.2 文件操作"></a>1.2 文件操作</h3><h4 id="1-mkdir-命令"><a href="#1-mkdir-命令" class="headerlink" title="1. mkdir 命令"></a>1. mkdir 命令</h4><ol>
<li><code>mkdir -p /a/b/c/d</code> <ul>
<li><strong>在 根目录下 创建 多级目录</strong> <code>/a/b/c/d</code></li>
</ul>
</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/162934198.png" alt="mark"></p>
<h4 id="2-rm-命令"><a href="#2-rm-命令" class="headerlink" title="2. rm 命令"></a>2. rm 命令</h4><ol>
<li><strong>删除空目录 – <code>rmdir</code></strong></li>
<li><strong>删除非空目录 – <code>rm -r</code></strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/162959806.png" alt="mark"></p>
<p><strong>注意 ：</strong> </p>
<ol>
<li><code>rm -rf</code> 不会显示提示 删除对应文件夹下的所有非空文件和目录</li>
<li><code>rm -r</code> 会有提示的删除对应文件下所有非空的文件和目录</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/164940841.png" alt="mark"></p>
<h4 id="3-cp-命令"><a href="#3-cp-命令" class="headerlink" title="3. cp 命令"></a>3. cp 命令</h4><ul>
<li>复制文件（<code>copy</code>）</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/164316373.png" alt="mark"></p>
<p><strong>注意</strong></p>
<ol>
<li><strong>cp 是用来普通复制文件的，如果想要复制目录 需要加上参数 <code>cp -r</code></strong></li>
<li><strong><code>cp -p</code> 会保留复制文件的属性参数（时间 权限。。。。）</strong></li>
</ol>
<h4 id="4-mv-命令"><a href="#4-mv-命令" class="headerlink" title="4. mv 命令"></a>4. mv 命令</h4><ol>
<li><strong>重命名</strong> 文件  : <code>mv filename1 filename2</code></li>
<li><strong>移动文件</strong> ： <code>mv sourcepath/sourfile destpath</code></li>
<li><strong>移动并且重命名文件</strong> ： <code>mv sourcepath/sourfile destpath/destfile</code></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/164832305.png" alt="mark"></p>
<h4 id="5-通配符"><a href="#5-通配符" class="headerlink" title="5. 通配符"></a>5. 通配符</h4><ol>
<li><strong><code>*</code> 匹配多个字符</strong></li>
<li><strong><code>?</code> 匹配单个字符</strong></li>
<li><strong>以上两个符号可以和命令结合使用</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/165112459.png" alt="mark"></p>
<h3 id="1-3-文本查看"><a href="#1-3-文本查看" class="headerlink" title="1.3 文本查看"></a>1.3 文本查看</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/165303155.png" alt="mark"></p>
<h4 id="1-cat"><a href="#1-cat" class="headerlink" title="1. cat"></a>1. cat</h4><h4 id="2-head"><a href="#2-head" class="headerlink" title="2. head"></a>2. head</h4><ul>
<li><strong>默认查看前十行的信息</strong></li>
</ul>
<h4 id="3-tail"><a href="#3-tail" class="headerlink" title="3. tail"></a>3. tail</h4><ul>
<li><p><strong>默认查看后十行的信息</strong></p>
</li>
<li><p><strong><code>tail -f</code> 同步进行更新尾部的信息 （适用于tomcat日志文件）</strong></p>
</li>
</ul>
<h4 id="4-wc"><a href="#4-wc" class="headerlink" title="4. wc"></a>4. wc</h4><ul>
<li><strong><code>wc -l</code> 查看文件有多少行 再决定是否用<code>cat</code>选项</strong> </li>
</ul>
<h4 id="5-more"><a href="#5-more" class="headerlink" title="5 more"></a>5 more</h4><ul>
<li>分页显示前面内容</li>
<li>使用空格继续显示后续内容</li>
</ul>
<h4 id="6-less"><a href="#6-less" class="headerlink" title="6. less"></a>6. less</h4><ul>
<li>less 与 more 类似，但使用 less 可以随意浏览文件，而 more 仅能向前移动，却不能向后移动，而且 less 在查看之前不会加载整个文件。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">less [参数] 文件</span><br></pre></td></tr></table></figure>



<h3 id="1-4-文件打包和压缩"><a href="#1-4-文件打包和压缩" class="headerlink" title="1.4 文件打包和压缩"></a>1.4 文件打包和压缩</h3><h4 id="1-打包和压缩"><a href="#1-打包和压缩" class="headerlink" title="1. 打包和压缩"></a>1. 打包和压缩</h4><p><strong>注意：</strong></p>
<ol>
<li><strong>打包和压缩对于Linux来说 是分开的步骤</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201206/170113392.png" alt="mark"></p>
<p><strong>例如 ：</strong> <code>tar cf /tmp/etc-backup.tar /etc</code> </p>
<ul>
<li>c 打包命令</li>
<li>f 打包成文件</li>
<li><code>/tmp/etc-backup.tar</code> /打包到哪里去/打包的文件名叫什么 </li>
<li><code>/etc</code> 对哪个目录进行打包</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/150706411.png" alt="mark"></p>
<p><strong>例如 ：</strong> <code>tar czf /tmp/etc-backup.tar /etc</code> </p>
<ul>
<li>c 打包命令</li>
<li>f 打包成文件</li>
<li>打包选项<ul>
<li><code>j</code> 是使用bz2 进行压缩  <code>tar cjf /tmp/etc-backup.tar.bz2 /etc</code></li>
<li><code>z</code> 是使用gzip 进行压缩 <code>tar czf /tmp/etc-backup.tar.gz /etc</code></li>
</ul>
</li>
<li><code>/tmp/etc-backup.tar</code> /打包到哪里去/打包的文件名叫什么 </li>
<li><code>/etc</code> 对哪个目录进行打包</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/151234915.png" alt="mark"></p>
<p><strong>注意 ：</strong></p>
<ul>
<li><strong>bz2 压缩的时间会比 gzip 的时间长</strong></li>
<li><strong>bz2 压缩的文件大小会比gzip 的文件小</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/151512233.png" alt="mark"></p>
<h4 id="2-解压缩"><a href="#2-解压缩" class="headerlink" title="2. 解压缩"></a>2. <strong>解压缩</strong></h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/151603474.png" alt="mark"></p>
<p>例如 ： <code>tar xf /tmp/etc-backup.tar -C /root</code></p>
<ul>
<li>x 解包</li>
<li>f 解包为文件</li>
<li><code>/tmp/etc-backup.tar</code> 对谁进行解包</li>
<li><code>-C</code> 放在什么位置需要加上</li>
<li><code>/root</code> 解压完放在哪个目录下 </li>
<li><strong>解包选项</strong><ul>
<li><code>j</code> 是使用bz2 进行压缩  <code>tar xjf /tmp/etc-backup.tar.bz2 /root</code></li>
<li><code>z</code> 是使用gzip 进行压缩 <code>tar xzf /tmp/etc-backup.tar.gz /root</code></li>
</ul>
</li>
</ul>
<p><strong>注意 ：双扩展名缩写</strong></p>
<ul>
<li><code>.tar.bz2 = .tbz2</code></li>
<li><code>.tar.gz = .tgz</code></li>
</ul>
<h2 id="2-文本编辑器-vi"><a href="#2-文本编辑器-vi" class="headerlink" title="2. 文本编辑器 vi"></a>2. 文本编辑器 vi</h2><ol>
<li><strong>输入 <code>vim 或 vi</code></strong> </li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/153225839.png" alt="mark"></p>
<ol start="2">
<li><strong><code>vim</code> 的四种工作模式</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201207/153045707.png" alt="mark"></p>
<ul>
<li>Vim是从 vi 发展出来的一个文本编辑器。代码补完、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用。</li>
<li>简单的来说， vi 是老式的字处理器，不过功能已经很齐全了，但是还是有可以进步的地方。 vim 则可以说是程序开发者的一项很好用的工具。</li>
<li><strong>vim 官网</strong> ： <a href="https://www.vim.org/" target="_blank" rel="noopener">https://www.vim.org/</a></li>
<li><strong>菜鸟教程</strong> ： <a href="https://www.runoob.com/linux/linux-vim.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-vim.html</a></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201209/093943425.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201211/110707643.png" alt="mark"></p>
<h3 id="2-1-vim-正常模式"><a href="#2-1-vim-正常模式" class="headerlink" title="2.1 vim 正常模式"></a>2.1 vim 正常模式</h3><ol>
<li><strong>插入模式</strong><ul>
<li><code>i</code> 进入插入模式</li>
<li><code>I</code> 进入插入模式 ： 光标来到本行的开头</li>
<li><code>a</code> 进入插入模式：  光标来到插入位置的后一位</li>
<li><code>A进入插入模式</code>：      光标来到本行的末尾</li>
<li><code>o</code> 进入插入模式 ： 光标来到当前的下一行，并在下方产生一个新的空行</li>
<li><code>O</code> 进入插入模式 ： 光标来到当前的上一行，并在上方产生一个新的空行</li>
</ul>
</li>
</ol>
<ol start="3">
<li><strong>复制剪切粘贴</strong><ul>
<li><code>yy</code> : 进行整行的复制<ul>
<li><code>3yy</code> 连续复制三行数据</li>
</ul>
</li>
<li><code>y$</code> ： 复制从光标的位置到本行结尾的数据</li>
<li><code>p</code> ： 进行整行的粘贴</li>
<li><code>dd</code> :  剪切一整行</li>
<li><code>d$</code> :  剪切从光标到本行结尾</li>
</ul>
</li>
</ol>
<ol start="4">
<li><strong>撤销和回撤</strong><ul>
<li><code>u</code> ： 普通模式下按u进行撤销/ 多次u多次撤销</li>
<li><code>ctrl + R</code> : 撤销指令进行回撤（重新执行）</li>
</ul>
</li>
</ol>
<ol start="5">
<li><strong>单个字符删除 / 替换</strong><ul>
<li><code>x</code> : 删除光标指定的字符</li>
<li><code>r</code> : 替换光标指定的字符</li>
</ul>
</li>
</ol>
<ol start="6">
<li><p><strong>移动光标</strong></p>
<ul>
<li><p><code>g</code> : 直接来到第一行第一个字符</p>
</li>
<li><p><code>G</code> : 直接来到最后一行第一个字符</p>
</li>
<li><p><code>数字 + G</code> : 直接移动到对应数字指定的行</p>
</li>
<li><p><code>h</code> : 光标向左移动</p>
</li>
<li><p><code>j</code> : 光标向下移动</p>
</li>
<li><p><code>k</code> : 光标向上移动</p>
</li>
<li><p><code>l</code> : 光标向右移动</p>
</li>
<li><p><code>shift + 6 = ^</code> : 来到这一行的开头</p>
</li>
<li><p><code>shift + 4 = $</code>  来到这一行的结尾</p>
</li>
<li><p><code>数字 + 空格</code> ： 光标移动到数字个字符后的位置</p>
</li>
<li><p><code>数字 + 回车</code> :    光标移动到n行以后的位置</p>
</li>
</ul>
</li>
</ol>
<h3 id="2-2-vim-命令行模式"><a href="#2-2-vim-命令行模式" class="headerlink" title="2.2 vim 命令行模式"></a>2.2 vim 命令行模式</h3><ol>
<li><strong>保存 / 退出</strong><ul>
<li><code>:</code>  :   光标来到最后一行</li>
<li><code>:w /root/a.txt</code> ： 保存 到 root 下面 ，文件名 a.txt</li>
<li><code>:q</code> :    退出</li>
<li><code>:wq</code>  ： 保存并且退出</li>
<li><code>:q!</code> : 不保存并且退出</li>
</ul>
</li>
</ol>
<ol start="2">
<li><strong>同时执行linux命令</strong><ul>
<li><code>:! + 命令</code>  ： 在vim模式下执行linux命令</li>
</ul>
</li>
</ol>
<ol start="3">
<li><strong>查找命令/替换</strong><ul>
<li><code>/ + 要查找的内容</code><ul>
<li>查找到之后  使用    <code>n</code>    来查找下一个匹配的位置</li>
<li>查找到之后  使用    <code>N</code>    来查找上一个匹配的位置</li>
</ul>
</li>
<li><code>:s/old/new</code>  : 查找到旧的(old) 替换成新的字符(new)<ul>
<li>本操作默认只针对光标所在的这一行</li>
<li><code>:%s/old/new</code>  :      全文new替换单一个位置的old</li>
<li><code>:%s/old/new/g</code>  :  全文new 替换所有位置的old (g = global)</li>
<li><code>:3,5s/old/new/g</code>  指定行new 替换所有位置的old (g = global)</li>
</ul>
</li>
</ul>
</li>
</ol>
<ol start="4">
<li><strong>修改配置</strong><ul>
<li><code>:set nu</code>  : 显示文本的行号   （暂时配置）</li>
<li><code>:set nonu</code> : 不显示文本的行号（暂时配置）</li>
<li><code>vim /etc/vimrc</code>  : 进入配置文件进行配置 （永久配置）<ul>
<li>如 新建一行 <code>set nu</code> 永久显示行号</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="2-3-vim-可视模式"><a href="#2-3-vim-可视模式" class="headerlink" title="2.3 vim 可视模式"></a>2.3 vim 可视模式</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201211/110642972.png" alt="mark"></p>
<ol>
<li><code>v</code> ：字符可视模式</li>
<li><code>V</code> :    行可视模式</li>
<li><code>ctrl + v</code> ：块可视模式<ul>
<li>指定选中块 <code>I</code>添加元素</li>
<li>指定选中块 d删除元素</li>
</ul>
</li>
</ol>
<h2 id="3-用户和用户组管理"><a href="#3-用户和用户组管理" class="headerlink" title="3. 用户和用户组管理"></a>3. 用户和用户组管理</h2><p><strong>手册链接</strong> ： [用户和用户组管理][<a href="https://www.runoob.com/linux/linux-user-manage.html]" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-user-manage.html]</a></p>
<ul>
<li><code>Linux</code>系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。</li>
<li>用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。</li>
</ul>
<p>每个用户账号都拥有一个唯一的用户名和各自的口令。</p>
<p>用户在登录时键入正确的用户名和口令后，就能够进入系统和自己的主目录。</p>
<p>实现用户账号的管理，要完成的工作主要有如下几个方面：</p>
<ul>
<li>用户账号的添加、删除与修改。</li>
<li>用户口令的管理。</li>
<li>用户组的管理。</li>
</ul>
<h3 id="3-1-用户管理常用命令"><a href="#3-1-用户管理常用命令" class="headerlink" title="3.1 用户管理常用命令"></a>3.1 用户管理常用命令</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/163508066.png" alt="mark"></p>
<h4 id="1-useradd"><a href="#1-useradd" class="headerlink" title="1. useradd"></a>1. useradd</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/163825953.png" alt="mark"></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd 选项 用户名</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li><p><strong>选项:</strong></p>
<ul>
<li><code>-c comment</code>指定一段注释性描述。</li>
<li><code>-d</code>目录 指定用户主目录，如果此目录不存在，则同时使用-m选项，可以创建主目录。</li>
<li><code>-g</code> 用户组 指定用户所属的用户组。</li>
<li><code>-G</code> 用户组，用户组 指定用户所属的附加组。</li>
<li><code>-s</code>Shell文件 指定用户的登录Shell。</li>
<li><code>-u</code> 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。</li>
</ul>
</li>
<li><p><strong>用户名:</strong></p>
<p>指定新账号的登录名。</p>
</li>
</ul>
<p><strong>注意</strong></p>
<ul>
<li><strong>两者对应的目录不同</strong> <ul>
<li><code>root</code> 默认在 <code>/root</code> 下</li>
<li><code>zhuuu</code> 默认在 <code>/home/同名目录</code> 下</li>
<li>同时操作系统会记录当前用户信息到配置文件中</li>
</ul>
</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/164100817.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/164446733.png" alt="mark"></p>
<h4 id="2-passwd"><a href="#2-passwd" class="headerlink" title="2. passwd"></a>2. passwd</h4><ul>
<li>用户管理的一项重要内容是用户口令的管理。<strong>用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。</strong></li>
<li>指定和修改用户口令的Shell命令是<code>passwd</code>。<strong>超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令</strong>。命令的格式为：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd 选项 用户名</span><br></pre></td></tr></table></figure>



<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/164829393.png" alt="mark"></p>
<ul>
<li>例如，假设当前用户是sam，则下面的<strong>命令修改该用户自己的口令</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ passwd </span><br><span class="line">Old password:****** </span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>如果是超级用户</strong>，可以用下列形式指定任何用户的口令：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># passwd sam </span><br><span class="line">New password:******* </span><br><span class="line">Re-enter new password:*******</span><br></pre></td></tr></table></figure>



<h4 id="3-userdel"><a href="#3-userdel" class="headerlink" title="3. userdel"></a>3. userdel</h4><ul>
<li>如果一个用户的账号不再使用，可以从系统中删除。</li>
<li><strong>删除用户账号就是要将<code>etc/passwd</code>等系统文件中的该用户记录删除，必要时还删除用户的主目录。</strong></li>
</ul>
<ol>
<li>删除一个已有的用户账号使用<code>userdel</code>命令，其格式如下：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel 选项 用户名</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><p><strong>常用的选项是 -r，它的作用是把用户的主目录一起删除。</strong></p>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># userdel -r sam</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><strong>此命令删除用户sam在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/165048418.png" alt="mark"></p>
<h4 id="4-usermod"><a href="#4-usermod" class="headerlink" title="4. usermod"></a>4. usermod</h4><ul>
<li><p>修改用户账号就是根据实际情况更改用户的有关属性，如<strong>用户号、主目录、用户组、登录Shel</strong>l等。</p>
</li>
<li><p>修改已有用户的信息使用<code>usermod</code>命令，其格式如下：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod 选项 用户名</span><br></pre></td></tr></table></figure>

<ul>
<li>常用的选项包括<code>-c, -d, -m, -g, -G, -s, -u以及-o等</code>，这些选项的意义与<code>useradd</code>命令中的选项一样，可以为用户指定新的资源值。</li>
</ul>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># usermod -s &#x2F;bin&#x2F;ksh -d &#x2F;home&#x2F;z –g developer sam</span><br></pre></td></tr></table></figure>

<p>此命令将用户sam的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。</p>
<h4 id="5-chage"><a href="#5-chage" class="headerlink" title="5. chage"></a>5. chage</h4><ul>
<li>设置用户的生命周期</li>
</ul>
<h3 id="3-2-用户组管理"><a href="#3-2-用户组管理" class="headerlink" title="3.2 用户组管理"></a>3.2 用户组管理</h3><ul>
<li>每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。</li>
<li>不同<code>Linux</code> 系统对用户组的规定有所不同，如<code>Linu</code>x下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。</li>
</ul>
<h4 id="1-groupadd"><a href="#1-groupadd" class="headerlink" title="1. groupadd"></a>1. groupadd</h4><ol>
<li><strong>方式一 ： 新建用户组并且放入新用户</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/171411570.png" alt="mark"></p>
<ol start="2">
<li><p>*<em>方式二 ： 新建用户组并且放入新用户 *</em> </p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/171508704.png" alt="mark"></p>
</li>
</ol>
<h4 id="2-groupdel"><a href="#2-groupdel" class="headerlink" title="2. groupdel"></a>2. groupdel</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupdel 用户组</span><br></pre></td></tr></table></figure>



<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># groupdel group1</span><br></pre></td></tr></table></figure>

<p>此命令从系统中删除组group1。</p>
<h3 id="3-3-切换用户"><a href="#3-3-切换用户" class="headerlink" title="3.3 切换用户"></a>3.3 切换用户</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/172216369.png" alt="mark"></p>
<ol>
<li><code>su</code> 切换用户<ul>
<li><strong><code>su - user1</code> ： 表示工作环境同时切换为user1</strong></li>
</ul>
</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/171743015.png" alt="mark"></p>
<p><strong>注意 ：</strong></p>
<ul>
<li><strong>普通用户</strong>之间切换需要使用密码</li>
<li><strong>root 用户</strong>切换不需要使用密码</li>
</ul>
<ol start="2">
<li><strong>授权普通用户进行关机命令</strong></li>
</ol>
<ul>
<li><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/172454537.png" alt="mark"></p>
</li>
<li><p><code>root</code> 用户设置30分钟后关机</p>
</li>
<li><p><code>user</code> 用户取消30分钟后关机</p>
</li>
<li><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/172608969.png" alt="mark"></p>
</li>
</ul>
<p><strong>注意 ： 在不告知user 密码的情况的下 ： 使用shutdown -c 命令</strong></p>
<ol>
<li><strong>给user 用户设置密码</strong></li>
<li><strong>使用<code>visudo</code> 命令</strong><ul>
<li>在本配置文件下，可以给用户赋予不同权限</li>
<li><code>:!which shutdown</code> 可以查找对应命令的目录在哪里</li>
<li><code>user3 ALL=/sbin/shutdown -c</code> 加入对应的权限命令</li>
</ul>
</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201212/173800290.png" alt="mark"></p>
<ol start="3">
<li><strong>这时使用<code>shutdown -c</code>仍然会提示权限不够</strong><ul>
<li><strong>需要使用<code>sudo /sbin/shutdown -c</code> 并且输入用户密码才能取消</strong></li>
</ul>
</li>
</ol>
<h3 id="3-4-用户组的配置文件"><a href="#3-4-用户组的配置文件" class="headerlink" title="3.4 用户组的配置文件"></a>3.4 用户组的配置文件</h3><ul>
<li><p>完成用户管理的工作有许多种方法，但是每一种方法实际上都是对有关的系统文件进行修改。</p>
</li>
<li><p>与用户和用户组相关的信息都存放在一些系统文件中，这些文件包括<code>/etc/passwd</code>, <code>/etc/shadow</code>, <code>/etc/group</code>等。</p>
</li>
</ul>
<p>下面分别介绍这些文件的内容。</p>
<h4 id="1-etc-passwd"><a href="#1-etc-passwd" class="headerlink" title="1. /etc/passwd"></a>1. /etc/passwd</h4><ul>
<li><p><strong>/etc/passwd文件是用户管理工作涉及的最重要的一个文件。</strong></p>
</li>
<li><p>Linux系统中的每个用户都在/etc/passwd文件中有一个对应的记录行，它记录了这个用户的一些基本属性。</p>
</li>
<li><p>这个文件对所有用户都是可读的。它的内容类似下面的例子：</p>
</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/103014232.png" alt="mark"></p>
<ul>
<li>从上面的例子我们可以看到，<code>/etc/passwd</code>中一行记录对应着一个用户，<strong>每行记录又被冒号(:)分隔为7个字段</strong>，其格式和具体含义如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录Shell</span><br></pre></td></tr></table></figure>



<ol>
<li><strong>用户名</strong></li>
</ol>
<ul>
<li><p>通常长度不超过8个字符，并且由大小写字母和/或数字组成。<strong>登录名中不能有冒号(:)，</strong>因为冒号在这里是分隔符。</p>
<p>为了兼容起见，登录名中最好不要包含点字符(.)，并且不使用连字符(-)和加号(+)打头。</p>
</li>
</ul>
<ol start="2">
<li><strong>口令</strong></li>
</ol>
<ul>
<li>虽然这个字段存放的只是用户口令的加密串，不是明文，</li>
<li><strong>但是由于/etc/passwd文件对所有用户都可读，所以这仍是一个安全隐患。</strong></li>
<li><strong>因此，现在许多Linux 系统（如SVR4）都使用了shadow技术，</strong>把真正的加密后的用户口令字存放到/etc/shadow文件中，而在/etc/passwd文件的口令字段中只存放一个特殊的字符，例如“x”或者“*”。</li>
</ul>
<ol start="3">
<li><strong>用户id</strong></li>
</ol>
<ul>
<li><p>是一个整数，系统内部用它来标识用户。</p>
</li>
<li><p>一般情况下它与用户名是一一对应的。<strong>如果几个用户名对应的用户标识号是一样的，系统内部将把它们视为同一个用户</strong></p>
</li>
<li><p><strong>但是它们可以有不同的口令、不同的主目录以及不同的登录Shell等。</strong></p>
</li>
<li><p>通常用户标识号的取值范围是0～65 535。</p>
<ul>
<li><strong>0是超级用户roo</strong>t的标识号，1～99由系统保留，作为管理账号</li>
<li><strong>普通用户的标识号从100开始</strong>。在Linux系统中，这个界限是500。</li>
</ul>
</li>
</ul>
<ol start="4">
<li><strong>组id</strong></li>
</ol>
<ul>
<li><strong>它对应着<code>/etc/group</code>文件中的一条记录。</strong></li>
</ul>
<ol start="5">
<li><strong>注释性描述</strong></li>
</ol>
<ul>
<li>例如用户的真实姓名、电话、地址等，这个字段并没有什么实际的用途。在不同的Linux 系统中，这个字段的格式并没有统一。在许多Linux系统中，这个字段存放的是一段任意的注释性描述文字，用做finger命令的输出。</li>
</ul>
<ol start="6">
<li><strong>用户的工作目录</strong></li>
</ol>
<ul>
<li>它是用户在登录到系统之后所处的目录。在大多数系统中，各用户的主目录都被组织在同一个特定的目录下，而用户主目录的名称就是该用户的登录名。</li>
<li>各用户对自己的主目录有读、写、执行（搜索）权限，其他用户对此目录的访问权限则根据具体情况设置。</li>
</ul>
<ol start="7">
<li><strong>用户使用的shell</strong></li>
</ol>
<ul>
<li><strong>用户登录后，要启动一个进程，负责将用户的操作传递给内核，这个进程是用户登录到系统后运行的命令解释器或者某个特定的程序（<code>shell</code>）</strong></li>
<li>Shell是用户与Linux系统之间的接口。<strong>Linux的Shell有许多种</strong>，每种都有不同的特点。<ul>
<li><strong>常用的有<code>sh(Bourne Shell), csh(C Shell), ksh(Korn Shell), tcsh(TENEX/TOPS-20 type C Shell), bash(Bourne Again Shell)</code>等。</strong></li>
<li>系统管理员可以根据系统情况和用户习惯为用户指定某个Shell。如果不指定Shell，那么系统使用sh为默认的登录Shell，即这个字段的值为/bin/sh。</li>
<li>利用这一特点，我们可以限制用户只能运行指定的应用程序,在该应用程序运行结束后，用户就自动退出了系统</li>
<li>有些Linux 系统要求只有那些在系统中登记了的程序才能出现在这个字段中。</li>
</ul>
</li>
</ul>
<ol start="8">
<li><strong>伪用户</strong></li>
</ol>
<ul>
<li>这些用户在/etc/passwd文件中也占有一条记录，但是不能登录，因为它们的登录Shell为空</li>
<li>它们的存在主要是方便系统管理，<strong>满足相应的系统进程对文件属主的要求。</strong></li>
</ul>
<p><strong>常见的伪用户如下所示：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">伪 用 户 含 义 </span><br><span class="line">bin 拥有可执行的用户命令文件 </span><br><span class="line">sys 拥有系统文件 </span><br><span class="line">adm 拥有帐户文件 </span><br><span class="line">uucp UUCP使用 </span><br><span class="line">lp lp或lpd子系统使用 </span><br><span class="line">nobody NFS使用</span><br></pre></td></tr></table></figure>



<p><strong>注意：</strong></p>
<ul>
<li><strong>在<code>/etc/passwd</code> 中新增加一行 相当于手动的创建了一个新用户  `useradd</strong>`</li>
</ul>
<h4 id="2-etc-shadow"><a href="#2-etc-shadow" class="headerlink" title="2. /etc/shadow"></a>2. /etc/shadow</h4><ul>
<li><p>由于<code>/etc/passwd</code>文件是所有用户都可读的，如果用户的密码太简单或规律比较明显的话，一台普通的计算机就能够很容易地将它破解，因此对安全性要求较高的Linux系统都把<strong>加密后的口令字分离出来，单独存放在一个文件中，这个文件是/etc/shadow文件</strong>。 有超级用户才拥有该文件读权限，这就保证了用户密码的安全性。</p>
</li>
<li><p><strong>/etc/shadow中的记录行与/etc/passwd中的一一对应，它由pwconv命令根据/etc/passwd中的数据自动产生</strong></p>
</li>
<li><p><strong>下面是/etc/shadow的一个例子：</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">＃ cat &#x2F;etc&#x2F;shadow</span><br><span class="line"></span><br><span class="line">root:Dnakfw28zf38w:8764:0:168:7:::</span><br><span class="line">daemon:*::0:0::::</span><br><span class="line">bin:*::0:0::::</span><br><span class="line">sys:*::0:0::::</span><br><span class="line">adm:*::0:0::::</span><br><span class="line">uucp:*::0:0::::</span><br><span class="line">nuucp:*::0:0::::</span><br><span class="line">auth:*::0:0::::</span><br><span class="line">cron:*::0:0::::</span><br><span class="line">listen:*::0:0::::</span><br><span class="line">lp:*::0:0::::</span><br><span class="line">sam:EkdiSECLWPdSa:9740:0:0::::</span><br></pre></td></tr></table></figure>



<p><strong>它的文件格式与/etc/passwd类似，由若干个字段组成，字段之间用”:”隔开。这些字段是：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span><br></pre></td></tr></table></figure>



<ol>
<li>“登录名”是与/etc/passwd文件中的登录名相一致的用户账号</li>
<li>“口令”字段存放的是加密后的用户口令字，长度为13个字符。如果为空，则对应用户没有口令，登录时不需要口令；如果含有不属于集合 { ./0-9A-Za-z }中的字符，则对应的用户不能登录。</li>
<li>“最后一次修改时间”表示的是从某个时刻起，到用户最后一次修改口令时的天数。时间起点对不同的系统可能不一样。例如在SCO Linux 中，这个时间起点是1970年1月1日。</li>
<li>“最小时间间隔”指的是两次修改口令之间所需的最小天数。</li>
<li>“最大时间间隔”指的是口令保持有效的最大天数。</li>
<li>“警告时间”字段表示的是从系统开始警告用户到用户密码正式失效之间的天数。</li>
<li>“不活动时间”表示的是用户没有登录活动但账号仍能保持有效的最大天数。</li>
<li>“失效时间”字段给出的是一个绝对的天数，如果使用了这个字段，那么就给出相应账号的生存期。期满后，该账号就不再是一个合法的账号，也就不能再用来登录了。</li>
</ol>
<p><strong>注意 ：</strong></p>
<ul>
<li><strong>即使两个用户设置了相同的密码，在配置文件<code>/etc/shadow</code> 中保存的密码显示也是不一样的</strong></li>
</ul>
<h4 id="4-etc-group"><a href="#4-etc-group" class="headerlink" title="4. /etc/group"></a>4. /etc/group</h4><ul>
<li>将用户分组是Linux 系统中对用户进行管理及控制访问权限的一种手段。</li>
<li><strong>每个用户都属于某个用户组；一个组中可以有多个用户，一个用户也可以属于不同的组。(多对多)</strong><ul>
<li>当一个用户同时是多个组中的成员时，在/etc/passwd文件中记录的是用户所属的主组，也就是登录时所属的默认组，而其他组称为附加组。</li>
<li>用户要访问属于附加组的文件时，必须首先使用newgrp命令使自己成为所要访问的组中的成员。</li>
</ul>
</li>
</ul>
<ul>
<li><strong>用户组的所有信息都存放在/etc/group文件中。此文件的格式也类似于/etc/passwd文件，由冒号(:)隔开若干个字段，这些字段有：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">组名:口令:组标识号:组内用户列表</span><br></pre></td></tr></table></figure>

<ol>
<li>“组名”是用户组的名称，由字母或数字构成。与/etc/passwd中的登录名一样，组名不应重复。</li>
<li>“口令”字段存放的是用户组加密后的口令字。一般Linux 系统的用户组都没有口令，即这个字段一般为空，或者是*。</li>
<li><strong>“组标识号”与用户标识号类似，也是一个整数，被系统内部用来标识组。(gid)</strong></li>
<li><strong>“组内用户列表”是属于这个组的所有用户的列表</strong>，不同用户之间用逗号(,)分隔。<strong>这个用户组可能是用户的主组，也可能是附加组。</strong></li>
</ol>
<p><strong>/etc/group文件的一个例子如下：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root::0:root</span><br><span class="line">bin::2:root,bin</span><br><span class="line">sys::3:root,uucp</span><br><span class="line">adm::4:root,adm</span><br><span class="line">daemon::5:root,daemon</span><br><span class="line">lp::7:root,lp</span><br><span class="line">users::20:root,sam</span><br></pre></td></tr></table></figure>



<h3 id="3-5-批量添加用户"><a href="#3-5-批量添加用户" class="headerlink" title="3.5 批量添加用户"></a>3.5 批量添加用户</h3><ul>
<li><p>添加和删除用户对每位Linux系统管理员都是轻而易举的事，比较棘手的是如果要添加几十个、上百个甚至上千个用户时，我们不太可能还使用useradd一个一个地添加，必然要找一种简便的创建大量用户的方法。</p>
</li>
<li><p>Linux系统提供了创建大量用户的工具，可以让您立即创建大量用户，方法如下：</p>
</li>
</ul>
<ol>
<li><strong>先编辑一个文本用户文件</strong></li>
</ol>
<ul>
<li>每一列按照<code>/etc/passwd</code>密码文件的格式书写，要注意每个用户的用户名、UID、宿主目录都不可以相同</li>
<li>其中密码栏可以留做空白或输入x号。一个范例文件user.txt内容如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user001::600:100:user:&#x2F;home&#x2F;user001:&#x2F;bin&#x2F;bash</span><br><span class="line">user002::601:100:user:&#x2F;home&#x2F;user002:&#x2F;bin&#x2F;bash</span><br><span class="line">user003::602:100:user:&#x2F;home&#x2F;user003:&#x2F;bin&#x2F;bash</span><br><span class="line">user004::603:100:user:&#x2F;home&#x2F;user004:&#x2F;bin&#x2F;bash</span><br><span class="line">user005::604:100:user:&#x2F;home&#x2F;user005:&#x2F;bin&#x2F;bash</span><br><span class="line">user006::605:100:user:&#x2F;home&#x2F;user006:&#x2F;bin&#x2F;bash</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>以root 的身份执行命令<code>/usr/sbin/newusers</code> 并且从刚创建的用户<code>user.txt</code> 中导入数据</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># newusers &lt; user.txt</span><br></pre></td></tr></table></figure>

<ul>
<li>然后可以执行命令 <code>vipw</code> 或 <code>vi /etc/passwd</code> 检查 <code>/etc/passwd</code> 文件是否已经出现这些用户的数据，并且用户的宿主目录是否已经创建。</li>
</ul>
<ol start="3">
<li><strong>执行<code>/usr/sbin/pwunconv</code></strong></li>
</ol>
<ul>
<li>将 <code>/etc/shadow</code> 产生的 <code>shadow</code> 密码解码，然后回写到 <code>/etc/passwd</code> 中</li>
<li>并将<code>/etc/shadow</code>的<code>shadow</code>密码栏删掉</li>
<li>这是为了方便下一步的密码转换工作，即先取消 <code>shadow password</code> 功能。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># pwunconv</span><br></pre></td></tr></table></figure>



<ol start="4">
<li><strong>编辑每个用户的密码对照文件</strong></li>
</ol>
<ul>
<li>格式为：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用户名:密码</span><br></pre></td></tr></table></figure>

<ul>
<li>实例文件 <code>passwd.txt</code> 内容如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">user001:123456</span><br><span class="line">user002:123456</span><br><span class="line">user003:123456</span><br><span class="line">user004:123456</span><br><span class="line">user005:123456</span><br><span class="line">user006:123456</span><br></pre></td></tr></table></figure>



<ol start="5">
<li><strong>以root 身份执行命令 <code>/usr/sbin/chpasswd</code></strong></li>
</ol>
<ul>
<li>创建用户密码，<code>chpasswd</code> 会将经过 <code>/usr/bin/passwd</code> 命令编码过的密码写入 <code>/etc/passwd</code> 的密码栏。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># chpasswd &lt; passwd.txt</span><br></pre></td></tr></table></figure>



<ol start="6">
<li><strong>确定密码经编码写入 <code>/etc/passwd</code> 密码栏后</strong></li>
</ol>
<ul>
<li>执行命令 <code>/usr/sbin/pwconv</code> 将密码编码为 <code>shadow password</code>，并将结果写入 <code>/etc/shadow</code>。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># pwconv</span><br></pre></td></tr></table></figure>



<p>这样就完成了大量用户的创建了，之后您可以到/home下检查这些用户宿主目录的权限设置是否都正确，并登录验证用户密码是否正确。</p>
<h2 id="4-文件权限"><a href="#4-文件权限" class="headerlink" title="4. 文件权限"></a>4. 文件权限</h2><ul>
<li>Linux 系统是一种典型的多用户系统，不同的用户处于不同的地位，拥有不同的权限。</li>
<li>为了保护系统的安全性，<strong>Linux 系统对不同的用户访问同一文件（包括目录文件）的权限做了不同的规定。</strong></li>
<li><strong>在 Linux 中我们通常使用以下两个命令来修改文件或目录的所属用户与权限：</strong><ul>
<li><strong>chown (change ownerp) ： 修改所属用户与组。</strong></li>
<li><strong>chmod (change mode) ： 修改用户的权限。</strong></li>
</ul>
</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/111053345.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/111535015.png" alt="mark"></p>
<h3 id="4-1-文件属性"><a href="#4-1-文件属性" class="headerlink" title="4.1 文件属性"></a>4.1 文件属性</h3><p>每个文件的属性由左边第一部分的 10 个字符来确定（如下图）。</p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/112201603.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/111643005.png" alt="mark"></p>
<ul>
<li><p>从左至右用 <strong>0-9</strong> 这些数字来表示。</p>
</li>
<li><p>第 <strong>0</strong> 位确定文件类型，</p>
</li>
<li><p>第 <strong>1-3</strong> 位确定属主（该文件的所有者）拥有该文件的权限。</p>
</li>
<li><p>第 <strong>4-6</strong> 位确定属组（所有者的同组用户）拥有该文件的权限</p>
</li>
</ul>
<p>*<em>权限对应 r w  x *</em></p>
<ul>
<li>其中，第 <strong>1、4、7</strong> 位表示读权限，如果用 <strong>r</strong> 字符表示，则有读权限，如果用 <strong>-</strong> 字符表示，则没有读权限；</li>
<li>第 <strong>2、5、8</strong> 位表示写权限，如果用 <strong>w</strong> 字符表示，则有写权限，如果用 <strong>-</strong> 字符表示没有写权限；</li>
<li>第 <strong>3、6、9</strong> 位表示可执行权限，如果用 <strong>x</strong> 字符表示，则有执行权限，如果用 <strong>-</strong> 字符表示，则没有执行权限。</li>
</ul>
<ol>
<li><strong>文件类型</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/112314719.png" alt="mark"></p>
<p>在 Linux 中第一个字符代表这个文件是目录、文件或链接文件等等。</p>
<ul>
<li>当为 <strong>d</strong> 则是目录</li>
<li>当为 <strong>-</strong> 则是文件；</li>
<li>若是 <strong>l</strong> 则表示为链接文档(link file)；</li>
<li>若是 <strong>b</strong> 则表示为装置文件里面的可供储存的接口设备(可随机存取装置)；</li>
<li>若是 <strong>c</strong> 则表示为装置文件里面的串行端口设备，例如键盘、鼠标(一次性读取装置)。</li>
</ul>
<h3 id="4-2-文件权限表示方法"><a href="#4-2-文件权限表示方法" class="headerlink" title="4.2 文件权限表示方法"></a>4.2 文件权限表示方法</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/142745085.png" alt="mark"></p>
<h3 id="4-3-权限的修改"><a href="#4-3-权限的修改" class="headerlink" title="4.3 权限的修改"></a>4.3 权限的修改</h3><p>在 Linux 中我们通常使用以下两个命令来修改文件或目录的所属用户与权限：</p>
<ul>
<li><strong>chown (change ownerp) ： 修改所属用户与组。</strong></li>
<li><strong>chmod (change mode) ： 修改用户的权限。</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/143101413.png" alt="mark"></p>
<h4 id="1-chown-更改属组-属主"><a href="#1-chown-更改属组-属主" class="headerlink" title="1. chown : 更改属组 属主"></a>1. chown : 更改属组 属主</h4><ul>
<li><p>对于文件来说，它都有一个特定的所有者，也就是对该文件具有所有权的用户。</p>
</li>
<li><p>同时，在Linux系统中，用户是按组分类的，一个用户属于一个或多个组。</p>
</li>
<li><p><strong>文件所有者以外的用户又可以分为文件所有者的同组用户和其他用户。</strong></p>
</li>
<li><p><strong>因此，Linux系统按文件所有者、文件所有者同组用户和其他用户来规定了不同的文件访问权限。</strong></p>
</li>
</ul>
<p><strong>举例</strong></p>
<ol>
<li><strong>新建一个默认的目录<code>mkdir test</code></strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/143510393.png" alt="mark"></p>
<ol start="2">
<li><strong>新建<code>user1,user2,user3</code>用户 并且设置组环境</strong><ul>
<li><code>useradd user1</code></li>
<li><code>useradd user2</code></li>
<li><code>useradd user3</code></li>
</ul>
</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/144048627.png" alt="mark"></p>
<ol start="3">
<li><strong>对目录修改属主和属组</strong></li>
</ol>
<ul>
<li><strong>修改属主</strong><ul>
<li><code>chown user1 test/</code></li>
<li><code>ls -ld test/</code></li>
</ul>
</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/144320654.png" alt="mark"></p>
<ul>
<li><strong>修改属组</strong><ul>
<li><code>chown :group1 test/</code></li>
<li><code>ls -ld test/</code></li>
</ul>
</li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/144442914.png" alt="mark"></p>
<p><strong>注意：</strong></p>
<ul>
<li><strong>权限限制是限制非root 用户的 ，即使root用户没有赋予任何权限，还是可以修改文件</strong></li>
</ul>
<h4 id="2-chgrp-：-更改属组"><a href="#2-chgrp-：-更改属组" class="headerlink" title="2. chgrp ： 更改属组"></a>2. chgrp ： 更改属组</h4><p><strong>语法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chgrp [-R] 属组名 文件名</span><br></pre></td></tr></table></figure>

<p>参数选项</p>
<ul>
<li>-R：递归更改文件属组，就是在更改某个目录文件的属组时，如果加上-R的参数，<strong>那么该目录下的所有文件的属组都会更改。</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/144748681.png" alt="mark"></p>
<h4 id="3-chmod-：-更改文件9个属性"><a href="#3-chmod-：-更改文件9个属性" class="headerlink" title="3. chmod ： 更改文件9个属性"></a>3. chmod ： 更改文件9个属性</h4><ul>
<li><p><strong>Linux文件属性有两种设置方法，一种是数字，一种是符号。</strong></p>
</li>
<li><p><strong>Linux 文件的基本权限就有九个，</strong></p>
<ul>
<li><strong>分别是 owner/group/others(拥有者/组/其他) 三种身份</strong></li>
<li><strong>各有自己的 read/write/execute 权限。</strong></li>
</ul>
</li>
</ul>
<ol>
<li><strong>字符修改权限</strong></li>
</ol>
<p>从之前的介绍中我们可以发现，基本上就九个权限分别是：</p>
<ul>
<li>user：用户</li>
<li>group：组</li>
<li>others：其他</li>
</ul>
<p><strong>那么我们就可以使用 u, g, o 来代表三种身份的权限。</strong></p>
<p>此外， <strong>a</strong> 则代表 <strong>all</strong>，即全部的身份。读写的权限可以写成 <strong>r, w, x</strong>，也就是可以使用下表的方式来看：</p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/145155332.png" alt="mark"></p>
<p><strong>举例</strong></p>
<ul>
<li>如果我们需要将文件权限设置为 <strong>-rwxr-xr–</strong> ，可以使用 <strong>chmod u=rwx,g=rx,o=r 文件名</strong> 来设定:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  touch test1    // 创建 test1 文件</span></span><br><span class="line"><span class="comment"># ls -al test1    // 查看 test1 默认权限</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 15 10:32 test1</span><br><span class="line"><span class="comment"># chmod u=rwx,g=rx,o=r  test1    // 修改 test1 权限</span></span><br><span class="line"><span class="comment"># ls -al test1</span></span><br><span class="line">-rwxr-xr-- 1 root root 0 Nov 15 10:32 test1</span><br></pre></td></tr></table></figure>

<ul>
<li><p>而如果是要将权限去掉而不改变其他已存在的权限呢？例如要拿掉全部人的可执行权限，则：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#  chmod  a-x test1</span></span><br><span class="line"><span class="comment"># ls -al test1</span></span><br><span class="line">-rw-r--r-- 1 root root 0 Nov 15 10:32 test1</span><br></pre></td></tr></table></figure>



</li>
</ul>
<ol start="2">
<li><strong>数字权限</strong></li>
</ol>
<p>先复习一下刚刚上面提到的数据：文件的权限字符为： <strong>-rwxrwxrwx</strong> ， 这九个权限是三个三个一组的！其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下：</p>
<ul>
<li><strong>r:4</strong></li>
<li><strong>w:2</strong></li>
<li><strong>x:1</strong></li>
</ul>
<p>每种身份(<code>owner/group/others</code>)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为： <strong>-rwxrwx—</strong> 分数则是：</p>
<ul>
<li><code>owner = rwx = 4+2+1 = 7</code></li>
<li><code>group = rwx = 4+2+1 = 7</code></li>
<li><code>others= --- = 0+0+0 = 0</code></li>
</ul>
<p>所以等一下我们设定权限的变更时，该文件的权限数字就是 <strong>770</strong>。变更权限的指令 chmod 的语法是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod [-R] xyz 文件或目录</span><br></pre></td></tr></table></figure>

<p><strong>选项与参数：</strong></p>
<ul>
<li><strong>xyz : 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。</strong></li>
<li><strong>-R : 进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更</strong></li>
</ul>
<p><strong>举例来说，如果要将 .bashrc 这个文件所有的权限都设定启用，那么命令如下：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@www ~]# ls -al .bashrc</span><br><span class="line">-rw-r--r--  1 root root 395 Jul  4 11:45 .bashrc</span><br><span class="line">[root@www ~]# chmod 777 .bashrc</span><br><span class="line">[root@www ~]# ls -al .bashrc</span><br><span class="line">-rwxrwxrwx  1 root root 395 Jul  4 11:45 .bashrc</span><br></pre></td></tr></table></figure>

<p>那如果要将权限变成 <em>-rwxr-xr–</em> 呢？那么权限的分数就成为 754。</p>
<h4 id="4-默认文件权限644由来"><a href="#4-默认文件权限644由来" class="headerlink" title="4. 默认文件权限644由来"></a>4. 默认文件权限644由来</h4><ol>
<li><code>umask = 0022</code></li>
<li><code>666 - 0022 = 644</code></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/150121943.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201213/150232060.png" alt="mark"></p>
<p><strong>注意 ：</strong></p>
<ol>
<li><p><strong>文件具体的权限以用户的权限为主</strong></p>
<ul>
<li><strong>如果发生权限冲突，即有种情况：用户没有权限但是属组有权限，该用户仍然没有权限，但是该组下其他用户是有对应权限的。</strong></li>
</ul>
</li>
<li><p><strong>目录的具体权限</strong></p>
<ul>
<li><strong><code>x</code> 表示可以进入目录的权限</strong></li>
<li><code>进入目录并且查看 需要 rx权限</code></li>
<li><code>进入目录并且删除文件 需要 wx权限</code></li>
</ul>
</li>
</ol>
<h4 id="5-特殊权限"><a href="#5-特殊权限" class="headerlink" title="5. 特殊权限"></a>5. 特殊权限</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/164053623.png" alt="mark"></p>
<ol>
<li><strong><code>SUID</code> : 获取属主权限</strong> <ul>
<li><strong>比如用户修改自己的密码</strong></li>
</ul>
</li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/164651088.png" alt="mark"></p>
<ol start="2">
<li><strong><code>SGID</code> : 文件共享时，权限改为该目录的属组</strong></li>
<li><strong><code>SBIT</code> :  防止自己的文件被其他普通用户误删掉</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/164924045.png" alt="mark"></p>
<ul>
<li><strong>增加特殊权限</strong><ul>
<li><strong>SUID : <code>chmod 4xxx</code>   xxx为原有的权限</strong></li>
<li><strong>SBIT : <code>chmod 1xxx</code>    xxx为原有的权限</strong></li>
</ul>
</li>
</ul>
<h2 id="5-网络管理"><a href="#5-网络管理" class="headerlink" title="5. 网络管理"></a>5. 网络管理</h2><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/165552875.png" alt="mark"></p>
<h3 id="5-1-网络状态的查看"><a href="#5-1-网络状态的查看" class="headerlink" title="5.1 网络状态的查看"></a>5.1 网络状态的查看</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/165748465.png" alt="mark"></p>
<ol>
<li><strong>net-tools 适用于 centos7 之前的系统</strong></li>
<li><strong>iproute2 适用于 centos7 以后的系统</strong></li>
</ol>
<h4 id="1-ifconfig"><a href="#1-ifconfig" class="headerlink" title="1. ifconfig"></a>1. ifconfig</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/170029026.png" alt="mark"></p>
<ol>
<li><strong>if = interface缩写（if）</strong></li>
<li><strong>第一块网卡的不同命名</strong>  <ul>
<li>对于服务器来说 如果服务器很多 那么批量操作就显得不便捷</li>
</ul>
</li>
<li><strong>普通用户</strong>查看 <code>sbin/ifconfig</code> 进行网络查看</li>
</ol>
<p><strong>注意： 如何重写网卡名回到eth0</strong></p>
<p> <img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/171945267.png" alt="mark"></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@zhuuu <span class="built_in">test</span>]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.21.0.6  netmask 255.255.240.0  broadcast 172.21.15.255 <span class="comment"># ip地址 子网掩码 广播地址</span></span><br><span class="line">        inet6 fe80::5054:ff:fe02:6706  prefixlen 64  scopeid 0x20&lt;link&gt;</span><br><span class="line">        ether 52:54:00:02:67:06  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 3234415  bytes 289214162 (275.8 MiB)	<span class="comment"># 发送数据包个数 和 大小</span></span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 3149017  bytes 549055111 (523.6 MiB) <span class="comment"># 接受数据包个数 和 大小</span></span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line"><span class="comment"># lo 本地环回</span></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        inet6 ::1  prefixlen 128  scopeid 0x10&lt;host&gt;</span><br><span class="line">        loop  txqueuelen 1000  (Local Loopback)</span><br><span class="line">        RX packets 4450  bytes 218920 (213.7 KiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 4450  bytes 218920 (213.7 KiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br></pre></td></tr></table></figure>



<h4 id="2-mii-tool"><a href="#2-mii-tool" class="headerlink" title="2. mii-tool"></a>2. mii-tool</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/172847300.png" alt="mark"></p>
<p><strong>注意：</strong></p>
<ul>
<li><strong>虚拟机/云服务器不支持此命令查看</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/173304520.png" alt="mark"></p>
<h4 id="3-route"><a href="#3-route" class="headerlink" title="3. route"></a>3. route</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/172922241.png" alt="mark"></p>
<ol>
<li><strong><code>route</code> 中的 ip 会变成域名</strong></li>
<li><strong><code>route -n</code> 不会反解ip 为域名</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/173452329.png" alt="mark"></p>
<h3 id="5-2-网络配置的修改"><a href="#5-2-网络配置的修改" class="headerlink" title="5.2 网络配置的修改"></a>5.2 网络配置的修改</h3><h4 id="1-ifup-ifdown"><a href="#1-ifup-ifdown" class="headerlink" title="1. ifup ifdown"></a>1. ifup ifdown</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/173615526.png" alt="mark"></p>
<ol>
<li><p><strong>启动关闭指定网卡</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ifconfig eth0 down</span><br><span class="line"># ifconfig eth0 up</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="2-网关配置"><a href="#2-网关配置" class="headerlink" title="2. 网关配置"></a>2. 网关配置</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/173651195.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/190418802.png" alt="mark"></p>
<p><strong>指定明细路由</strong></p>
<ol>
<li><strong>指定走特定ip 使用特定的路由</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/190635734.png" alt="mark"></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/190654328.png" alt="mark"></p>
<ol start="2">
<li><strong>指定走特定的网段 使用特定的路由</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/190815409.png" alt="mark"></p>
<h4 id="3-ip-命令"><a href="#3-ip-命令" class="headerlink" title="3. ip 命令"></a>3. ip 命令</h4><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201215/184014703.png" alt="mark"></p>
<p><strong>注意：</strong></p>
<ul>
<li><strong>云服务器暂时不需要改动，因为改动可能就连不上了</strong></li>
</ul>
<h3 id="5-3-网络故障的排除（服务上线网络问题）"><a href="#5-3-网络故障的排除（服务上线网络问题）" class="headerlink" title="5.3 网络故障的排除（服务上线网络问题）"></a>5.3 网络故障的排除（服务上线网络问题）</h3><p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/170800833.png" alt="mark"></p>
<h4 id="1-ping"><a href="#1-ping" class="headerlink" title="1. ping"></a>1. ping</h4><ul>
<li><strong>执行ping指令会使用ICMP传输协议</strong>，发出要求回应的信息，若远端主机的网络功能没有问题，就会回应该信息，因而得知该主机运作正常。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping [-dfnqrRv][-c&lt;完成次数&gt;][-i&lt;间隔秒数&gt;][-I&lt;网络界面&gt;][-l&lt;前置载入&gt;][-p&lt;范本样式&gt;][-s&lt;数据包大小&gt;][-t&lt;存活数值&gt;][主机名称或IP地址]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>-d 使用Socket的SO_DEBUG功能。</li>
<li><strong>-c&lt;完成次数&gt; 设置完成要求回应的次数。</strong></li>
<li>-f 极限检测。</li>
<li>-i&lt;间隔秒数&gt; 指定收发信息的间隔时间。</li>
<li>-I&lt;网络界面&gt; 使用指定的网络接口送出数据包。</li>
<li>-l&lt;前置载入&gt; 设置在送出要求信息之前，先行发出的数据包。</li>
<li>-n 只输出数值。</li>
<li>-p&lt;范本样式&gt; 设置填满数据包的范本样式。</li>
<li>-q 不显示指令执行过程，开头和结尾的相关信息除外。</li>
<li>-r 忽略普通的Routing Table，直接将数据包送到远端主机上。</li>
<li>-R 记录路由过程。</li>
<li>-s&lt;数据包大小&gt; 设置数据包的大小。</li>
<li>-t&lt;存活数值&gt; 设置存活数值TTL的大小。</li>
<li>-v 详细显示指令的执行过程。</li>
</ul>
<p><strong>举例子</strong></p>
<ol>
<li><strong>检测是否与主机连通</strong></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping www.w3cschool.cc //ping主机</span></span><br><span class="line">PING aries.m.alikunlun.com (114.80.174.110) 56(84) bytes of data.</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=1 ttl=64 time=0.025 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=2 ttl=64 time=0.036 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=3 ttl=64 time=0.034 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=4 ttl=64 time=0.034 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=5 ttl=64 time=0.028 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=6 ttl=64 time=0.028 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=7 ttl=64 time=0.034 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=8 ttl=64 time=0.034 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=9 ttl=64 time=0.036 ms</span><br><span class="line">64 bytes from 114.80.174.110: icmp_seq=10 ttl=64 time=0.041 ms</span><br><span class="line"></span><br><span class="line">--- aries.m.alikunlun.com ping statistics ---</span><br><span class="line">10 packets transmitted, 30 received, 0% packet loss, time 29246ms</span><br><span class="line">rtt min/avg/max/mdev = 0.021/0.035/0.078/0.011 ms</span><br><span class="line"></span><br><span class="line">//需要手动终止Ctrl+C</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><p><strong>指定接收包的次数</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping -c 2 www.w3cschool.cc</span></span><br><span class="line">PING aries.m.alikunlun.com (114.80.174.120) 56(84) bytes of data.</span><br><span class="line">64 bytes from 114.80.174.120: icmp_seq=1 ttl=54 time=6.18 ms</span><br><span class="line">64 bytes from 114.80.174.120: icmp_seq=2 ttl=54 time=15.4 ms</span><br><span class="line"></span><br><span class="line">--- aries.m.alikunlun.com ping statistics ---</span><br><span class="line">2 packets transmitted, 2 received, 0% packet loss, time 1016ms</span><br><span class="line">rtt min/avg/max/mdev = 6.185/10.824/15.464/4.640 ms</span><br><span class="line"></span><br><span class="line">//收到两次包后，自动退出</span><br></pre></td></tr></table></figure>



</li>
</ol>
<ol start="3">
<li><p><strong>多参数使用</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ping -i 3 -s 1024 -t 255 g.cn //ping主机</span></span><br><span class="line">PING g.cn (203.208.37.104) 1024(1052) bytes of data.</span><br><span class="line">1032 bytes from <span class="built_in">bg</span>-in-f104.1e100.net (203.208.37.104): icmp_seq=0 ttl=243 time=62.5 ms</span><br><span class="line">1032 bytes from <span class="built_in">bg</span>-in-f104.1e100.net (203.208.37.104): icmp_seq=1 ttl=243 time=63.9 ms</span><br><span class="line">1032 bytes from <span class="built_in">bg</span>-in-f104.1e100.net (203.208.37.104): icmp_seq=2 ttl=243 time=61.9 ms</span><br><span class="line"></span><br><span class="line">--- g.cn ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 6001ms</span><br><span class="line">rtt min/avg/max/mdev = 61.959/62.843/63.984/0.894 ms, pipe 2</span><br><span class="line">[root@linux ~]<span class="comment"># </span></span><br><span class="line"></span><br><span class="line">//-i 3 发送周期为 3秒 -s 设置发送包的大小 -t 设置TTL值为 255</span><br></pre></td></tr></table></figure>



</li>
</ol>
<h4 id="2-traceroute"><a href="#2-traceroute" class="headerlink" title="2. traceroute"></a>2. traceroute</h4><ul>
<li><code>Linux traceroute</code>命令用于显示数据包到主机间的路径。</li>
<li><code>traceroute</code>指令让<strong>你追踪网络数据包的路由途径</strong>，预设数据包大小是40Bytes，用户可另行设置。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">traceroute [-dFlnrvx][-f&lt;存活数值&gt;][-g&lt;网关&gt;...][-i&lt;网络界面&gt;][-m&lt;存活数值&gt;][-p&lt;通信端口&gt;][-s&lt;来源地址&gt;][-t&lt;服务类型&gt;][-w&lt;超时秒数&gt;][主机名称或IP地址][数据包大小]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>-d 使用Socket层级的排错功能。</li>
<li>-f&lt;存活数值&gt; 设置第一个检测数据包的存活数值TTL的大小。</li>
<li>-F 设置勿离断位。</li>
<li>-g&lt;网关&gt; 设置来源路由网关，最多可设置8个。</li>
<li>-i&lt;网络界面&gt; 使用指定的网络界面送出数据包。</li>
<li>-I 使用ICMP回应取代UDP资料信息。</li>
<li>-m&lt;存活数值&gt; 设置检测数据包的最大存活数值TTL的大小。</li>
<li>-n 直接使用IP地址而非主机名称。</li>
<li>-p&lt;通信端口&gt; 设置UDP传输协议的通信端口。</li>
<li>-r 忽略普通的Routing Table，直接将数据包送到远端主机上。</li>
<li>-s&lt;来源地址&gt; 设置本地主机送出数据包的IP地址。</li>
<li>-t&lt;服务类型&gt; 设置检测数据包的TOS数值。</li>
<li>-v 详细显示指令的执行过程。</li>
<li><strong>-w&lt;超时秒数&gt; 设置等待远端主机回报的时间。</strong></li>
<li>-x 开启或关闭数据包的正确性检验。</li>
</ul>
<p><strong>举例子：</strong></p>
<ol>
<li><strong>追踪到 百度页面 等待时间1秒</strong></li>
</ol>
<p><code>traceroute -w 1 www.baidu.com</code></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/171630478.png" alt="mark"></p>
<h4 id="3-mtr"><a href="#3-mtr" class="headerlink" title="3. mtr"></a>3. mtr</h4><ul>
<li>输入mtr后进入该界面</li>
<li><strong>显示主机之间的通信（常用）</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/171718804.png" alt="mark"></p>
<h4 id="4-nslookup"><a href="#4-nslookup" class="headerlink" title="4. nslookup"></a>4. nslookup</h4><ul>
<li><strong>将域名解析为 ip 地址</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/171919025.png" alt="mark"></p>
<h4 id="5-telnet"><a href="#5-telnet" class="headerlink" title="5. telnet"></a>5. telnet</h4><ul>
<li>Linux telnet命令用于远端登入。</li>
<li>执行telnet指令开启终端机阶段作业，并登入远端主机。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">telnet [-8acdEfFKLrx][-b&lt;主机别名&gt;][-e&lt;脱离字符&gt;][-k&lt;域名&gt;][-l&lt;用户名称&gt;][-n&lt;记录文件&gt;][-S&lt;服务类型&gt;][-X&lt;认证形态&gt;][主机名称或IP地址&lt;通信端口&gt;]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>-8 允许使用8位字符资料，包括输入与输出。</li>
<li>-a 尝试自动登入远端系统。</li>
<li>-b&lt;主机别名&gt; 使用别名指定远端主机名称。</li>
<li>-c 不读取用户专属目录里的.telnetrc文件。</li>
<li>-d 启动排错模式。</li>
<li>-e&lt;脱离字符&gt; 设置脱离字符。</li>
<li>-E 滤除脱离字符。</li>
<li>-f 此参数的效果和指定”-F”参数相同。</li>
<li>-F 使用Kerberos V5认证时，加上此参数可把本地主机的认证数据上传到远端主机。</li>
<li>-k&lt;域名&gt; 使用Kerberos认证时，加上此参数让远端主机采用指定的领域名，而非该主机的域名。</li>
<li>-K 不自动登入远端主机。</li>
<li>-l&lt;用户名称&gt; 指定要登入远端主机的用户名称。</li>
<li>-L 允许输出8位字符资料。</li>
<li>-n&lt;记录文件&gt; 指定文件记录相关信息。</li>
<li>-r 使用类似rlogin指令的用户界面。</li>
<li>-S&lt;服务类型&gt; 设置telnet连线所需的IP TOS信息。</li>
<li>-x 假设主机有支持数据加密的功能，就使用它。</li>
<li>-X&lt;认证形态&gt; 关闭指定的认证形态。</li>
</ul>
<p>举例子：</p>
<ol>
<li><strong>查看端口是否畅通</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/172307347.png" alt="mark"></p>
<p><code>telnet 域名/ip 端口号</code></p>
<ol start="2">
<li><strong>退出<code>telnet</code></strong><ul>
<li><strong><code>ctrl + ]</code></strong></li>
<li><strong>再次输入quit</strong></li>
</ul>
</li>
</ol>
<h4 id="6-tcpdump-网络抓包"><a href="#6-tcpdump-网络抓包" class="headerlink" title="6. tcpdump 网络抓包"></a>6. tcpdump 网络抓包</h4><ul>
<li><code>Linux tcpdump</code>命令用于倾倒网络传输数据。</li>
<li>执行<code>tcpdump</code>指令可列出经过指定网络界面的数据包文件头</li>
<li>在<code>Linux</code>操作系统中，你必须是系统管理员。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tcpdump [-adeflnNOpqStvx][-c&lt;数据包数目&gt;][-dd][-ddd][-F&lt;表达文件&gt;][-i&lt;网络界面&gt;][-r&lt;数据包文件&gt;][-s&lt;数据包大小&gt;][-tt][-T&lt;数据包类型&gt;][-vv][-w&lt;数据包文件&gt;][输出数据栏位]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>-a 尝试将网络和广播地址转换成名称。</li>
<li>-c&lt;数据包数目&gt; 收到指定的数据包数目后，就停止进行倾倒操作。</li>
<li>-d 把编译过的数据包编码转换成可阅读的格式，并倾倒到标准输出。</li>
<li>-dd 把编译过的数据包编码转换成C语言的格式，并倾倒到标准输出。</li>
<li>-ddd 把编译过的数据包编码转换成十进制数字的格式，并倾倒到标准输出。</li>
<li>-e 在每列倾倒资料上显示连接层级的文件头。</li>
<li>-f 用数字显示网际网络地址。</li>
<li>-F&lt;表达文件&gt; 指定内含表达方式的文件。</li>
<li><strong>-i&lt;网络界面&gt; 使用指定的网络截面送出数据包。</strong></li>
<li>-l 使用标准输出列的缓冲区。</li>
<li><strong>-n 不把主机的网络地址转换成名字。</strong></li>
<li>-N 不列出域名。</li>
<li>-O 不将数据包编码最佳化。</li>
<li>-p 不让网络界面进入混杂模式。</li>
<li>-q 快速输出，仅列出少数的传输协议信息。</li>
<li>-r&lt;数据包文件&gt; 从指定的文件读取数据包数据。</li>
<li>-s&lt;数据包大小&gt; 设置每个数据包的大小。</li>
<li>-S 用绝对而非相对数值列出TCP关联数。</li>
<li>-t 在每列倾倒资料上不显示时间戳记。</li>
<li>-tt 在每列倾倒资料上显示未经格式化的时间戳记。</li>
<li>-T&lt;数据包类型&gt; 强制将表达方式所指定的数据包转译成设置的数据包类型。</li>
<li>-v 详细显示指令执行过程。</li>
<li>-vv 更详细显示指令执行过程。</li>
<li>-x 用十六进制字码列出数据包资料。</li>
<li>-w&lt;数据包文件&gt; 把数据包数据写入指定的文件。</li>
</ul>
<p><strong>举例</strong></p>
<ol>
<li><strong>抓取80端口 不显示域名 的所有数据包</strong></li>
</ol>
<p><code>tcpdump -i any -n port 80</code></p>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/172941487.png" alt="mark"></p>
<ol start="2">
<li><strong>抓取特定主机 不显示域名 的所有数据包</strong></li>
</ol>
<p><code>tcpdump -i any -n host 10.0.0.1</code></p>
<ol start="3">
<li><strong>同时抓取ip + port 的数据包</strong></li>
</ol>
<p><code>tcpdump -i any -n host 10.0.0.1 and port 80</code></p>
<ol start="4">
<li><strong>抓取数据包 并 保存成为日志文件</strong></li>
</ol>
<p><code>tcpdump -i any -n host 10.0.0.1 and port 80 -w 指定路径</code></p>
<h4 id="7-netstat"><a href="#7-netstat" class="headerlink" title="7. netstat"></a>7. netstat</h4><ul>
<li>Linux netstat 命令用于显示网络状态。</li>
<li>利用 netstat 指令可让你得知整个 Linux 系统的网络情况。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat [-acCeFghilMnNoprstuvVwx][-A&lt;网络类型&gt;][--ip]</span><br></pre></td></tr></table></figure>

<p><strong>参数说明</strong>：</p>
<ul>
<li>-a或–all 显示所有连线中的Socket。</li>
<li>-A&lt;网络类型&gt;或–&lt;网络类型&gt; 列出该网络类型连线中的相关地址。</li>
<li>-c或–continuous 持续列出网络状态。</li>
<li>-C或–cache 显示路由器配置的快取信息。</li>
<li>-e或–extend 显示网络其他相关信息。</li>
<li>-F或–fib 显示FIB。</li>
<li>-g或–groups 显示多重广播功能群组组员名单。</li>
<li>-h或–help 在线帮助。</li>
<li>-i或–interfaces 显示网络界面信息表单。</li>
<li><strong>-l或–listening 显示监控中的服务器的Socket。</strong></li>
<li>-M或–masquerade 显示伪装的网络连线。</li>
<li><strong>-n或–numeric 直接使用IP地址，而不通过域名服务器。</strong></li>
<li>-N或–netlink或–symbolic 显示网络硬件外围设备的符号连接名称。</li>
<li>-o或–timers 显示计时器。</li>
<li><strong>-p或–programs 显示正在使用Socket的程序识别码和程序名称。</strong></li>
<li>-r或–route 显示Routing Table。</li>
<li>-s或–statistics 显示网络工作信息统计表。</li>
<li><strong>-t或–tcp 显示TCP传输协议的连线状况。</strong></li>
<li>-u或–udp 显示UDP传输协议的连线状况。</li>
<li>-v或–verbose 显示指令执行过程。</li>
<li>-V或–version 显示版本信息。</li>
<li>-w或–raw 显示RAW传输协议的连线状况。</li>
<li>-x或–unix 此参数的效果和指定”-A unix”参数相同。</li>
<li>–ip或–inet 此参数的效果和指定”-A inet”参数相同。</li>
</ul>
<p><strong>举例</strong></p>
<ol>
<li><strong>不显示域名 监听 tcp 的进程</strong></li>
</ol>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/173546348.png" alt="mark"></p>
<h4 id="8-ss"><a href="#8-ss" class="headerlink" title="8. ss"></a>8. ss</h4><ul>
<li><strong>另外一种格式的netstat</strong></li>
</ul>
<p><img src="http://zhuuu-bucket.oss-cn-beijing.aliyuncs.com/img/20201216/173827867.png" alt="mark"></p>

      
      <!-- reward -->
      
      <div id="reward-btn">
        打赏
      </div>
      
    </div>
      <!-- copyright -->
      
        <div class="declare">
          <ul class="post-copyright">
            <li>
              <i class="ri-copyright-line"></i>
              <strong>版权声明： </strong s>
              本博客所有文章除特别声明外，均采用 <a href="https://www.apache.org/licenses/LICENSE-2.0.html" rel="external nofollow"
                target="_blank">Apache License 2.0</a> 许可协议。转载请注明出处！
            </li>
          </ul>
        </div>
        
    <footer class="article-footer">
      
          
<div class="share-btn">
      <span class="share-sns share-outer">
        <i class="ri-share-forward-line"></i>
        分享
      </span>
      <div class="share-wrap">
        <i class="arrow"></i>
        <div class="share-icons">
          
          <a class="weibo share-sns" href="javascript:;" data-type="weibo">
            <i class="ri-weibo-fill"></i>
          </a>
          <a class="weixin share-sns wxFab" href="javascript:;" data-type="weixin">
            <i class="ri-wechat-fill"></i>
          </a>
          <a class="qq share-sns" href="javascript:;" data-type="qq">
            <i class="ri-qq-fill"></i>
          </a>
          <a class="douban share-sns" href="javascript:;" data-type="douban">
            <i class="ri-douban-line"></i>
          </a>
          <!-- <a class="qzone share-sns" href="javascript:;" data-type="qzone">
            <i class="icon icon-qzone"></i>
          </a> -->
          
          <a class="facebook share-sns" href="javascript:;" data-type="facebook">
            <i class="ri-facebook-circle-fill"></i>
          </a>
          <a class="twitter share-sns" href="javascript:;" data-type="twitter">
            <i class="ri-twitter-fill"></i>
          </a>
          <a class="google share-sns" href="javascript:;" data-type="google">
            <i class="ri-google-fill"></i>
          </a>
        </div>
      </div>
</div>

<div class="wx-share-modal">
    <a class="modal-close" href="javascript:;"><i class="ri-close-circle-line"></i></a>
    <p>扫一扫，分享到微信</p>
    <div class="wx-qrcode">
      <img src="//api.qrserver.com/v1/create-qr-code/?size=150x150&data=http://zhuuu.work/2018/08/11/Linux/Linux-00-%E5%AE%9E%E6%88%98%E5%AD%A6%E4%B9%A0/" alt="微信分享二维码">
    </div>
</div>

<div id="share-mask"></div>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Linux/" rel="tag">Linux</a></li></ul>


    </footer>

  </div>

  
  
  <nav class="article-nav">
    
      <a href="/2019/01/18/JavaInterview/Java-%E5%9F%BA%E7%A1%80-%E6%8A%BD%E8%B1%A1%E7%B1%BB/" class="article-nav-link">
        <strong class="article-nav-caption">上一篇</strong>
        <div class="article-nav-title">
          
            Java-基础-抽象类
          
        </div>
      </a>
    
    
  </nav>


  

  
  
<!-- valine评论 -->
<div id="vcomments-box">
    <div id="vcomments">
    </div>
</div>
<script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src='https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js'></script>
<script>
    new Valine({
        el: '#vcomments',
        notify: false,
        verify: '',
        app_id: '',
        app_key: '',
        path: window.location.pathname,
        avatar: 'mp',
        placeholder: '给我的文章加点评论吧~',
        recordIP: true
    });
    const infoEle = document.querySelector('#vcomments .info');
    if (infoEle && infoEle.childNodes && infoEle.childNodes.length > 0) {
        infoEle.childNodes.forEach(function (item) {
            item.parentNode.removeChild(item);
        });
    }
</script>
<style>
    #vcomments-box {
        padding: 5px 30px;
    }

    @media screen and (max-width: 800px) {
        #vcomments-box {
            padding: 5px 0px;
        }
    }

    #vcomments-box #vcomments {
        background-color: #fff;
    }

    .v .vlist .vcard .vh {
        padding-right: 20px;
    }

    .v .vlist .vcard {
        padding-left: 10px;
    }
</style>

  

  
  
<div class="gitalk" id="gitalk-container"></div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.css">


<script src="https://cdn.jsdelivr.net/npm/gitalk@1.5.0/dist/gitalk.min.js"></script>


<script src="https://cdn.jsdelivr.net/npm/blueimp-md5@2.10.0/js/md5.min.js"></script>

<script type="text/javascript">
  var gitalk = new Gitalk({
    clientID: 'db188ed8c86dc4b0dbf3',
    clientSecret: 'a58f92160e5a9efd726b7d533000a0737f3e3f3e',
    repo: 'Blog-comments',
    owner: 'Zhuuuuuuuu',
    admin: ['Zhuuuuuuuu'],
    // id: location.pathname,      // Ensure uniqueness and length less than 50
    id: md5(location.pathname),
    distractionFreeMode: false,  // Facebook-like distraction free mode
    pagerDirection: 'last'
  })

  gitalk.render('gitalk-container')
</script>

  

</article>
</section>
      <footer class="footer">
  <div class="outer">
    <ul class="list-inline">
      <li>
        &copy;
        2019-2020
        Zhuuu
      </li>
      <li>
        
      </li>
    </ul>
    <ul class="list-inline">
      <li>
        
        
        <span>
  <i>PV:<span id="busuanzi_value_page_pv"></span></i>
  <i>UV:<span id="busuanzi_value_site_uv"></span></i>
</span>
        
      </li>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>
    <div class="to_top">
        <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>
      </div>
    </main>
      <aside class="sidebar">
        <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="朱酱酱的学习博客"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/JVM/">JVM</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/JDK%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/">JDK源码</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/">多线程</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Mysql/">Mysql</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Redis/">Redis</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E8%AE%BE%E8%AE%A1%E8%80%85%E6%A8%A1%E5%BC%8F/">设计模式</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/MyBatis/">MyBatis</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/SpringMVC/">SpringMVC</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Spring/">Spring</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/SpringBoot/">SpringBoot</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">Linux</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Leetcode/">Leetcode</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/">网络编程</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/Python/">Python</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/photoshop/">photoshop</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://smartzhuuu.lofter.com/" target="_blank" rel="noopener">摄影</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/2020/about">关于我</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="http://zhuuu.com.cn/" target="_blank" rel="noopener">云服务器</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
      </aside>
      <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
      
<script src="/js/jquery-2.0.3.min.js"></script>


<script src="/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/lazyload.min.js"></script>


<script src="/js/busuanzi-2.3.pure.min.js"></script>


<script src="/js/share.js"></script>



<script src="/fancybox/jquery.fancybox.min.js"></script>




<script>
  try {
    var typed = new Typed("#subtitle", {
    strings: ['昨夜西风凋碧树。独上高楼，望尽天涯路','衣带渐宽终不悔，为伊消得人憔悴。','众里寻他千百度。蓦然回首，那人却在，灯火阑珊处。'],
    startDelay: 0,
    typeSpeed: 200,
    loop: true,
    backSpeed: 100,
    showCursor: true
    });
  } catch (err) {
  }
  
</script>




<script src="/js/tocbot.min.js"></script>

<script>
  // Tocbot_v4.7.0  http://tscanlin.github.io/tocbot/
  tocbot.init({
    tocSelector: '.tocbot',
    contentSelector: '.article-entry',
    headingSelector: 'h1, h2, h3, h4, h5, h6',
    hasInnerContainers: true,
    scrollSmooth: true,
    scrollContainer:'main',
    positionFixedSelector: '.tocbot',
    positionFixedClass: 'is-position-fixed',
    fixedSidebarOffset: 'auto',
    onClick: (e) => {
      $('.toc-link').removeClass('is-active-link');
      $(`a[href=${e.target.hash}]`).addClass('is-active-link');
      $(e.target.hash).scrollIntoView();
      return false;
    }
  });
</script>


<script>
  var ayerConfig = {
    mathjax: true
  }
</script>


<script src="/js/ayer.js"></script>


<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css">


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script>



<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<script type="text/javascript" src="https://js.users.51.la/20544303.js"></script>
  </div>
</body>

</html>